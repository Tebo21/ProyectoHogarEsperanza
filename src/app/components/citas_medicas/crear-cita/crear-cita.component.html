<app-navbar-admin></app-navbar-admin>
<br>
<div class="container animated d-flex justify-content-center animated fadeIn">
    <p-panel class="card">
        <div class="modal-header text-center">
            <h2 class="title">Agregar Cita Medica</h2>
        </div>
        <br />
        <div class="form-group">
            <label for="descripcionCitaMedica"><b>Descripción de la cita:</b></label>
            <input type="text" class="form-control" required [(ngModel)]="cita.descripcionCitaMedica" placeholder="Descripcion Cita Medica" />
        </div>

        <div class="form-group">
            <label for="fechaCitaMedica"><b>Fecha de la Cita Médica:</b></label>
            <input [(ngModel)]="cita.fechaCitaMedica" name="fechaCitaMedica" id="cita.fechaCitaMedica" type="datetime-local" class="form-control" placeholder="Fecha de la cita medica">
        </div>

        <div class="form-group ">
            <label for="cedulpa"> <b>Ingrese el número de cédula del Paciente: </b></label>
            <input type="text" class="form-control" [formControl]="cedulapa" id="paciente" required [(ngModel)]="cedulaPaciente" name="paciente" placeholder="Cedula paciente">
            <p style="margin-left: 5%;"></p>
            <button type="button" class="btn btn-secondary" id="btnpa" (click)="buscarPersona()" [disabled]="cedulapa.invalid">Verificar informacion</button>

            <p style="margin-left: 25%;"></p>
            <div *ngIf="valida==true" class="alert alert-info" role="alert" id="alert1">
                <div>
                    <label for="nombre" class="form-label"><b>Nombre</b></label>
                    <input type="text" class="form-control" [(ngModel)]="nombreper" disabled>
                </div>
                <div>
                    <label for="email" class="form-label"><b>Correo</b></label>
                    <input type="email" class="form-control" id="email" [(ngModel)]="correoper" disabled>
                </div>
                <div>
                    <label for="examplePhone" class="form-label"><b>Teléfono</b></label>
                    <input type="text" class="form-control" [(ngModel)]="telefonoper" disabled>
                </div>
                <p style="border: 5%;"></p>
                <div>
                    <button type="button" class="btn btn-info" data-dismiss="alert">Información correcta</button>
                    <p style="border: 5%;"></p>
                    <button type="button" class="btn btn-outline-danger" (click)="registrar()">No, registrar Paciente</button>
                </div>
            </div>
        </div>
        <div class="form-group ">
            <label for="acompanante"> <b>Ingrese número de cédula del Acompañante:</b></label>
            <input type="text" class="form-control" id="acompanante" [formControl]="cedulaac" required [(ngModel)]="cedulaAcom" name="acompanante" placeholder="Cedula Acopañante">
            <p style="margin-left: 5%;"></p>
            <button type="button" class="btn btn-secondary" (click)="buscarAcompa()" [disabled]="cedulaac.invalid">Verificar información</button>

            <p style="margin-left: 25%;"></p>
            <div *ngIf="valida2==true" class="alert alert-info" role="alert" id="alert2">
                <div>
                    <label for="nombre" class="form-label"><b>Nombre</b></label>
                    <input type="text" class="form-control" [(ngModel)]="nombreper2" disabled>
                </div>
                <div>
                    <label for="email" class="form-label"><b>Correo</b></label>
                    <input type="email" class="form-control" id="email" [(ngModel)]="correoper2" disabled>
                </div>
                <div>
                    <label for="examplePhone" class="form-label"><b>Teléfono</b></label>
                    <input type="text" class="form-control" [(ngModel)]="telefonoper2" disabled>
                </div>
                <p style="border: 5%;"></p>
                <div>
                    <button type="button" class="btn btn-info" data-dismiss="alert">Información correcta</button>
                    <p style="border: 5%;"></p>
                    <button type="button" class="btn btn-outline-danger" (click)="registrar()">No, registrar Acompañante</button>
                </div>
            </div>
        </div>

        <div class="form-group ">
            <label for="mensaje"><b>Ingrese el correo al que se enviará el recordatorio:</b></label>
            <input type="text" class="form-control" id="mensaje" required [(ngModel)]="cita.mensaje" name="mensaje" placeholder="correo">
        </div>


        <div class="form-group">
            <label for="name"><b>Ingrese el número de cédula del Trabajador de la fundación:</b></label>
            <input type="text" class="form-control" id="trabajador" [formControl]="cedulatra" required [(ngModel)]="cedulaTra" name="trabajador" placeholder="Cedula trabajador">

            <p style="margin-left: 5%;"></p>
            <button type="button" class="btn btn-secondary" id="btn3" (click)="buscarTraba()" [disabled]="cedulatra.invalid">Verificar información</button>

            <p style="margin-left: 5%;"></p>
            <div *ngIf="valida3==true" id="alert3" class="alert alert-info alert-dismissible fade show" role="alert" align-items="center;" justify-content="center;">
                <p style="margin-left: 25%;"></p>
                <div>
                    <label for="nombre" class="form-label"><b>Nombre</b></label>
                    <input type="text" class="form-control" [(ngModel)]="nombreper3" disabled>
                </div>
                <div>
                    <label for="email" class="form-label"><b>Correo</b></label>
                    <input type="email" class="form-control" id="email" [(ngModel)]="correoper3" disabled>
                </div>
                <div>
                    <label for="examplePhone" class="form-label"><b>Teléfono</b></label>
                    <input type="text" class="form-control" [(ngModel)]="telefonoper3" disabled>
                </div>
                <p style="border: 5%;"></p>
                <div>
                    <button type="button" class="btn btn-info" data-dismiss="alert">Información correcta</button>
                    <p style="border: 5%;"></p>
                    <button type="button" class="btn btn-outline-danger" (click)="registrar()">No, registrar Trabajador</button>
                </div>
            </div>
        </div>

        <div class="form-group ">
            <label for="centroMedico"><b>Seleccione el Centro Médico:</b></label>
            <br>
            <p style="margin-left: 5%;"></p>
            <div class="dropdown show">
                <select [(ngModel)]="nombreSeCe" class="btn btn-secondary dropdown-toggle" id="nomcentro" forControlName="nomcentro">
                             <option *ngFor="let c of centro" class="dropdown-item">
                             {{c.nombreCentroMedico}}
                             </option>
                            </select>
            </div>
        </div>

        <div class="form-group ">
            <label for="centroMedico "><b>Seleccione la Especialidad:</b></label>
            <br>
            <p style="margin-left: 25%; "></p>
            <div class="dropdown show ">
                <select [(ngModel)]="nombreSeEspecialidad " class="btn btn-secondary dropdown-toggle " id="nomespecialidad " forControlName="nomespecialidad ">
                                <option *ngFor="let e of especialidad " class="dropdown-item ">
                                    {{e.nombreEspecialidad}}
                                 </option>
                            </select>
            </div>
        </div>

        <div class="form-group ">
            <label for="name "><b>Observaciones a tener en cuenta para la cita:</b></label>
            <input type="text " class="form-control " id="nota " required [(ngModel)]="cita.nota " name="nota " placeholder="Observaciones ">
        </div>
        <div class="card-footer">
            <div class="botones">
                <div class="row">
                    <div class="col d-grid gap-2">
                        <button class="btn btn-outline-success btnfooter" (click)="save()" type="button" style="margin-left: 10px">
                    Guardar <i class="pi pi-check"></i>
                  </button>
                    </div>

                    <div class="col d-grid gap-2">
                        <button class="btn btn-outline-primary btnfooter" (click)="genereport()" type="button" style="margin-left: 10px">
                    Reporte <i class="pi pi-file-pdf"></i>
                  </button>
                    </div>
                </div>
            </div>
        </div>
    </p-panel>
</div>
<br/>
<div>
    <div class="modal-header text-center ">
        <h3 class="text-center "><b>Lista de las Citas Medicas agendadas</b></h3>
    </div>
    <br />
    <div>
        <button style="margin-left: 80% " type="button " class="btn btn-secondary btn-lg " (click)="buscar() ">Buscar por:</button>
    </div>
    <br />
    <div class="container animated d-flex justify-content-center animated fadeIn">
        <table class="table table-bordered ">
            <thead>
                <tr>
                    <th scope="col ">Descripción de la Cita Medica</th>
                    <th scope="col ">Fecha Cita Médica</th>
                    <th scope="col ">Hora</th>
                    <th scope="col ">Paciente</th>
                    <th scope="col ">Acompañante</th>
                    <th scope="col ">Correo</th>
                    <th scope="col ">Trabajador</th>
                    <th scope="col ">Centro Médico</th>
                    <th scope="col ">Especialidad</th>
                    <th scope="col ">Observaciones</th>
                    <th scope="col ">Opciones</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let u of citaMedica | async " class="list-group-item-action ">
                    <td>
                        {{ u.descripcionCitaMedica}}
                    </td>
                    <td>
                        {{ u.fechaCitaMedica.substring(0,10)}}
                    </td>
                    <td>
                        {{ u.fechaCitaMedica.substring(11) }}
                    </td>
                    <td>
                        {{ u.paciente }}
                    </td>
                    <td>
                        {{ u.acompaniante }}
                    </td>
                    <td>
                        {{ u.mensaje }}
                    </td>
                    <td>
                        {{ u.trabajadorFundacion }}
                    </td>
                    <td>
                        {{ u.centroMedico }}
                    </td>
                    <td>
                        {{ u.especialidad }}
                    </td>
                    <td>
                        {{ u.nota }}
                    </td>
                    <td>
                        <div class="cell" data-title="Acciones">
                            <input class="btn-update" (click)="openForEdit(u)" type="image" src="../../../assets/img/pencil.svg" alt="Delete" />
                            <input class="btn-delete" (click)="deleteCita(u)" type="image" src="../../../assets/img/delete.svg" alt="Delete" />
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>